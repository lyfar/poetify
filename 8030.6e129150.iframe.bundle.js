"use strict";(self.webpackChunkpoetify=self.webpackChunkpoetify||[]).push([[8030],{"./mocks/demoData.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$X:()=>demoLibraryAlbums,AQ:()=>demoTracks,CX:()=>demoCategories,Et:()=>demoPlaylist,VV:()=>demoLikedSongs,Wf:()=>getContextTracks,k9:()=>DEMO_PLAYLIST_URI,o1:()=>demoPlaybackState,po:()=>sanitizeTrack,uX:()=>demoArtists,vs:()=>demoTopArtists});var _utils_basePath__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./utils/basePath.ts");const createImages=baseUrl=>{if(baseUrl.startsWith("/")){const resolvedUrl=(0,_utils_basePath__WEBPACK_IMPORTED_MODULE_0__.h)(baseUrl);return[{url:resolvedUrl,height:640,width:640},{url:resolvedUrl,height:300,width:300},{url:resolvedUrl,height:64,width:64}]}return[{url:`${baseUrl}?auto=format&fit=crop&w=640&q=80`,height:640,width:640},{url:`${baseUrl}?auto=format&fit=crop&w=300&q=80`,height:300,width:300},{url:`${baseUrl}?auto=format&fit=crop&w=64&q=80`,height:64,width:64}]},demoArtists=[{external_urls:{spotify:"/artist/poetify-artist-mf-doom"},followers:{href:null,total:1200},genres:["hip-hop","lofi"],href:"/api/demo/artists/poetify-artist-mf-doom",id:"poetify-artist-mf-doom",images:createImages("/assets/artists/poetify-artist-mf-doom.jpg"),name:"MF DOOM (cover)",popularity:60,type:"artist",uri:"poetify:artist:poetify-artist-mf-doom"},{external_urls:{spotify:"/artist/poetify-artist-nirvana"},followers:{href:null,total:1400},genres:["rock","grunge"],href:"/api/demo/artists/poetify-artist-nirvana",id:"poetify-artist-nirvana",images:createImages("/assets/artists/poetify-artist-nirvana.jpg"),name:"Nirvana (cover)",popularity:58,type:"artist",uri:"poetify:artist:poetify-artist-nirvana"},{external_urls:{spotify:"/artist/poetify-artist-gorillaz"},followers:{href:null,total:1100},genres:["alt","indie"],href:"/api/demo/artists/poetify-artist-gorillaz",id:"poetify-artist-gorillaz",images:createImages("/assets/artists/poetify-artist-gorillaz.jpg"),name:"Gorillaz (cover)",popularity:55,type:"artist",uri:"poetify:artist:poetify-artist-gorillaz"},{external_urls:{spotify:"/artist/poetify-artist-janis"},followers:{href:null,total:900},genres:["blues","rock"],href:"/api/demo/artists/poetify-artist-janis",id:"poetify-artist-janis",images:createImages("/assets/artists/poetify-artist-janis.jpg"),name:"Janis Joplin (cover)",popularity:50,type:"artist",uri:"poetify:artist:poetify-artist-janis"},{external_urls:{spotify:"/artist/poetify-artist-queen"},followers:{href:null,total:1300},genres:["rock","classic rock"],href:"/api/demo/artists/poetify-artist-queen",id:"poetify-artist-queen",images:createImages("/assets/artists/poetify-artist-queen.jpg"),name:"Queen (cover)",popularity:57,type:"artist",uri:"poetify:artist:poetify-artist-queen"},{external_urls:{spotify:"/artist/poetify-artist-joy-division"},followers:{href:null,total:1e3},genres:["post-punk","alternative"],href:"/api/demo/artists/poetify-artist-joy-division",id:"poetify-artist-joy-division",images:createImages("/assets/artists/poetify-artist-joy-division.jpg"),name:"Joy Division (cover)",popularity:54,type:"artist",uri:"poetify:artist:poetify-artist-joy-division"},{external_urls:{spotify:"/artist/poetify-artist-the-prodigy"},followers:{href:null,total:1400},genres:["electronic","breakbeat"],href:"/api/demo/artists/poetify-artist-the-prodigy",id:"poetify-artist-the-prodigy",images:createImages("/assets/artists/poetify-artist-the-prodigy.jpg"),name:"The Prodigy (cover)",popularity:56,type:"artist",uri:"poetify:artist:poetify-artist-the-prodigy"},{external_urls:{spotify:"/artist/poetify-artist-feduk"},followers:{href:null,total:900},genres:["hip-hop","pop"],href:"/api/demo/artists/poetify-artist-feduk",id:"poetify-artist-feduk",images:createImages("/assets/artists/poetify-artist-feduk.jpg"),name:"FEDUK (cover)",popularity:52,type:"artist",uri:"poetify:artist:poetify-artist-feduk"},{external_urls:{spotify:"/artist/poetify-artist-poetify"},followers:{href:null,total:0},genres:["demo"],href:"/api/demo/artists/poetify-artist-poetify",id:"poetify-artist-poetify",images:createImages("/assets/artists/poetify-artist-poetify.jpg"),name:"Poetify (demo)",popularity:0,type:"artist",uri:"poetify:artist:poetify-artist-poetify"}],sanitizeAlbum=album=>({...album,tracks:{...album.tracks,items:[]}}),sanitizeTrack=track=>{var _track_preview_url;return{...track,album:sanitizeAlbum(track.album),preview_url:null!==(_track_preview_url=track.preview_url)&&void 0!==_track_preview_url?_track_preview_url:null,duration_ms:("preview_url"in track&&track.preview_url,track.duration_ms)}},albumCoverPath=albumId=>`/assets/covers/albums/${albumId}.jpg`,demoArtistById=Object.fromEntries(demoArtists.map(artist=>[artist.id,artist])),demoTrackSeeds=[{id:"poetify-track-heart-shaped-box-cover",name:"Heart-Shaped Box — Nirvana",artistId:"poetify-artist-nirvana",duration_ms:142840,explicit:!1,preview_url:"/music/ladies-and-gentlemen.wav"},{id:"poetify-track-moonlight-cover",name:"Moonlight (XXXTENTACION) — Nirvana",artistId:"poetify-artist-nirvana",duration_ms:142680,explicit:!0,preview_url:"/music/yeah-2.wav"},{id:"poetify-track-revenge-cover",name:"Revenge (XXXTENTACION) — Nirvana",artistId:"poetify-artist-nirvana",duration_ms:150960,explicit:!0,preview_url:"/music/revenge-xxxtentacion-nirvana.wav"},{id:"poetify-track-shimmy-cover",name:"Shimmy Shimmy Ya (Ol’ Dirty Bastard) — Janis Joplin",artistId:"poetify-artist-janis",duration_ms:294920,explicit:!0,preview_url:"/music/shimmy-shimmy-ya-odb-janis-joplin.wav"},{id:"poetify-track-all-along-the-watchtower-cover",name:"All Along the Watchtower (Jimi Hendrix) — MF DOOM",artistId:"poetify-artist-mf-doom",duration_ms:134600,explicit:!1,preview_url:"/music/All Along the Watchtower - Jimi Hendrix x MFDOOM.wav"},{id:"poetify-track-blue-suede-shoes-cover",name:"Blue Suede Shoes (Elvis Presley) — The Prodigy",artistId:"poetify-artist-the-prodigy",duration_ms:343680,explicit:!1,preview_url:"/music/Blue Suede Shoes Elvis Presley x Prodigy.wav"},{id:"poetify-track-cry-baby-cover",name:"Cry Baby (Janis Joplin) — MF DOOM",artistId:"poetify-artist-mf-doom",duration_ms:187040,explicit:!1,preview_url:"/music/Cry Baby Janis Joplin Х MFDOOM.wav"},{id:"poetify-track-hippa-to-da-hoppa-cover",name:"Hippa to Da Hoppa (Ol’ Dirty Bastard) — Joy Division",artistId:"poetify-artist-joy-division",duration_ms:226600,explicit:!1,preview_url:"/music/Hippa to Da Hoppa Ol’ Dirty Bastard Х Joy Division.wav"},{id:"poetify-track-i-love-rock-n-roll-cover",name:"I Love Rock ’n Roll (Joan Jett and the Blackhearts) — MF DOOM",artistId:"poetify-artist-mf-doom",duration_ms:202720,explicit:!1,preview_url:"/music/I Love Rock ’n Roll Joan Jett and the Blackhearts x MFDOOM.wav"},{id:"poetify-track-i-want-it-that-way-cover",name:"I Want It That Way (Backstreet Boys) — MF DOOM",artistId:"poetify-artist-mf-doom",duration_ms:167960,explicit:!1,preview_url:"/music/I Want It That Way Backstreet Boys x MFDOOM.wav"},{id:"poetify-track-jamming-cover",name:"Jamming (Bob Marley & The Wailers) — Queen",artistId:"poetify-artist-queen",duration_ms:259480,explicit:!1,preview_url:"/music/Jamming Bob Marley & The Wailers x Queen.wav"},{id:"poetify-track-out-of-space-cover",name:"Out of Space (The Prodigy) — Queen",artistId:"poetify-artist-queen",duration_ms:478760,explicit:!1,preview_url:"/music/Out of Space The Prodigy x Queen.wav"},{id:"poetify-track-rapp-snitch-knishes-cover",name:"Rapp Snitch Knishes (MF DOOM) — Janis Joplin",artistId:"poetify-artist-janis",duration_ms:349080,explicit:!1,preview_url:"/music/Rapp Snitch Knishes MF DOOM x Janis Joplin.wav"},{id:"poetify-track-riders-on-the-storm-cover",name:"Riders on the Storm (The Doors) — MF DOOM",artistId:"poetify-artist-mf-doom",duration_ms:171480,explicit:!1,preview_url:"/music/Riders on the Storm The Doors x MFDOOM.wav"},{id:"poetify-track-were-rolling-suicide",name:'We\'re rolling "Suicide" (System of a Down) — MF DOOM',artistId:"poetify-artist-mf-doom",duration_ms:146880,explicit:!1,preview_url:'/music/We\'re rolling "Suicide".wav'},{id:"poetify-track-den-rozhdeniya-cover",name:"День рождения (Birthday) (Ленинград) — Janis Joplin",artistId:"poetify-artist-janis",duration_ms:196920,explicit:!1,preview_url:"/music/День рождения (Birthday) Ленинград x Janis Joplin.wav"},{id:"poetify-track-intro-griby-cover-v2",name:"Интро (Intro) (Грибы (Griby)) — Nirvana (v2)",artistId:"poetify-artist-nirvana",duration_ms:189400,explicit:!1,preview_url:"/music/Интро (Intro) Грибы (Griby) (Cover) x Nirvana-2.wav"},{id:"poetify-track-intro-griby-cover",name:"Интро (Intro) (Грибы (Griby)) — Nirvana",artistId:"poetify-artist-nirvana",duration_ms:204840,explicit:!1,preview_url:"/music/Интро (Intro) Грибы (Griby) (Cover) x Nirvana.wav"},{id:"poetify-track-okolofutbola",name:"Околофутбола (Near Football)",artistId:"poetify-artist-feduk",duration_ms:109200,explicit:!1,preview_url:"/music/Околофутбола (Near Football) FEDUK.mp3"}],demoTrackCountByArtistId=demoTrackSeeds.reduce((acc,track)=>{var _acc_track_artistId;return acc[track.artistId]=(null!==(_acc_track_artistId=acc[track.artistId])&&void 0!==_acc_track_artistId?_acc_track_artistId:0)+1,acc},{}),createArtistAlbum=({artist,totalTracks})=>{const albumId=`poetify-album-${artist.id.replace(/^poetify-artist-/,"")}`;var name;return{album_type:"album",total_tracks:totalTracks,external_urls:{spotify:`/album/${albumId}`},available_markets:["US"],href:`/api/demo/albums/${albumId}`,id:albumId,images:createImages(albumCoverPath(albumId)),name:`POETIFY x ${name=artist.name,name.replace(/\s*\(cover\)\s*$/,"").replace(/\s*\(demo\)\s*$/,"")}`,release_date:"2025-12-24",release_date_precision:"day",type:"album",uri:`poetify:album:${albumId}`,artists:[artist],tracks:{href:`/api/album/${albumId}/tracks`,limit:50,next:null,offset:0,previous:null,total:totalTracks,items:[]},copyrights:[],label:"Poetify demo",popularity:55}},demoAlbumsByArtistId=Object.fromEntries(Object.entries(demoTrackCountByArtistId).map(([artistId,totalTracks])=>{const artist=demoArtistById[artistId];if(!artist)throw new Error(`Missing artist for id: ${artistId}`);return[artistId,createArtistAlbum({artist,totalTracks})]})),demoAlbums=demoArtists.filter(artist=>demoAlbumsByArtistId[artist.id]).map(artist=>demoAlbumsByArtistId[artist.id]),demoTracks=(()=>{const trackNumberByArtistId={};return demoTrackSeeds.map(seed=>{const artist=demoArtistById[seed.artistId],baseAlbum=demoAlbumsByArtistId[seed.artistId];var _trackNumberByArtistId_seed_artistId;const trackNumber=(null!==(_trackNumberByArtistId_seed_artistId=trackNumberByArtistId[seed.artistId])&&void 0!==_trackNumberByArtistId_seed_artistId?_trackNumberByArtistId_seed_artistId:0)+1;var _seed_explicit,trackId;return trackNumberByArtistId[seed.artistId]=trackNumber,{artists:[artist],album:{...baseAlbum,images:createImages((trackId=seed.id,`/assets/covers/tracks/${trackId}.jpg`))},available_markets:["US"],disc_number:1,duration_ms:seed.duration_ms,explicit:null!==(_seed_explicit=seed.explicit)&&void 0!==_seed_explicit&&_seed_explicit,external_urls:{spotify:"#"},href:"#",id:seed.id,is_playable:!0,name:seed.name,track_number:trackNumber,type:"track",uri:`poetify:track:${seed.id}`,is_local:!1,preview_url:(0,_utils_basePath__WEBPACK_IMPORTED_MODULE_0__.h)(seed.preview_url)}})})(),DEMO_PLAYLIST_URI="poetify:playlist:demo-playlist",playlistItems=demoTracks.map(track=>({added_at:"2025-12-24T00:00:00",added_by:{external_urls:{spotify:"/user/demo-user"},href:"/api/demo/users/demo-user",id:"demo-user",type:"user",uri:"poetify:user:demo-user"},is_local:!1,primary_color:null,track})),demoPlaylist={collaborative:!1,description:"A birthday playlist of cross-artist covers for Nikita.",external_urls:{spotify:"/playlist/demo-playlist"},href:"/api/demo/playlists/demo-playlist",id:"demo-playlist",images:createImages("/assets/covers/demo-playlist.jpg"),name:"for Nikita's Birthday",owner:{display_name:"Poetify demo",external_urls:{spotify:"/user/demo-user"},href:"/api/demo/users/demo-user",id:"demo-user",type:"user",uri:"poetify:user:demo-user"},primary_color:null,public:!1,snapshot_id:"demo-snapshot",tracks:{href:"/api/playlist/demo-playlist/tracks",items:playlistItems,limit:50,next:null,offset:0,previous:null,total:playlistItems.length},type:"playlist",uri:DEMO_PLAYLIST_URI},demoLibraryAlbums=demoAlbums.map(album=>({added_at:"2025-12-24T00:00:00",album:sanitizeAlbum(album)})),demoLikedSongs=demoTracks.map(track=>({added_at:"2025-12-24T00:00:00",track})),demoTopArtists=(demoTracks.map(track=>({track,context:{type:"playlist",href:"/api/demo/playlists/demo-playlist",external_urls:{spotify:"/playlist/demo-playlist"},uri:DEMO_PLAYLIST_URI},played_at:"2025-12-24T00:00:00"})),demoArtists.filter(artist=>demoTrackCountByArtistId[artist.id])),demoCategories=(createImages("/nikita.jpg.webp"),[{href:"/api/categories",id:"demo-1",icons:createImages("/assets/covers/demo-album-nikita.jpg"),name:"Covers"},{href:"/api/categories",id:"demo-2",icons:createImages("/assets/covers/demo-album-nikita.jpg"),name:"Birthday"},{href:"/api/categories",id:"demo-3",icons:createImages("/assets/covers/demo-album-nikita.jpg"),name:"Poetify Mix"}]),demoPlaybackState=()=>({device:{id:"demo-device",is_active:!0,is_private_session:!1,is_restricted:!1,name:"Poetify demo",type:"Computer",volume_percent:70,supports_volume:!0},shuffle_state:!1,smart_shuffle:!1,repeat_state:"off",is_playing:!1,timestamp:Date.now(),context:{type:"playlist",href:"/api/demo/playlists/demo-playlist",external_urls:{spotify:"/playlist/demo-playlist"},uri:DEMO_PLAYLIST_URI},progress_ms:0,item:demoTracks[0],currently_playing_type:"track"}),getContextTracks=()=>{const map={[DEMO_PLAYLIST_URI]:demoTracks};return demoTracks.forEach(track=>{map[track.album.uri]=map[track.album.uri]?[...map[track.album.uri],track]:[track]}),map["poetify:collection:tracks"]=demoTracks,map["poetify:user:demo-user:collection"]=demoTracks,map}},"./redux/StoreProvider.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>StoreProvider});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),react_redux=__webpack_require__("./node_modules/react-redux/dist/react-redux.mjs"),redux=__webpack_require__("./node_modules/redux/dist/redux.mjs"),redux_toolkit_modern=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.modern.mjs"),authSlice=__webpack_require__("./redux/slices/authSlice.ts"),userSlice=__webpack_require__("./redux/slices/userSlice.ts"),librarySlice=__webpack_require__("./redux/slices/librarySlice.ts"),demoData=__webpack_require__("./mocks/demoData.ts");const fetchCategories=(0,redux_toolkit_modern.zD)("categories/fetchCategories",async()=>demoData.CX),slices_categoriesSlice=(0,redux_toolkit_modern.Z0)({name:"categories",initialState:{isLoading:!1,hasFetched:!1,categories:[]},reducers:{},extraReducers:builder=>{builder.addCase(fetchCategories.pending,state=>{state.isLoading=!0}),builder.addCase(fetchCategories.fulfilled,(state,action)=>{state.categories=action.payload,state.hasFetched=!0,state.isLoading=!1}),builder.addCase(fetchCategories.rejected,state=>{state.categories=[],state.hasFetched=!0,state.isLoading=!1})}}).reducer;var playerSlice=__webpack_require__("./redux/slices/playerSlice.ts");const reducer=(0,redux.HY)({auth:authSlice.Ay,user:userSlice.Ay,library:librarySlice.Ay,categories:slices_categoriesSlice,player:playerSlice.Ay}),makeStore=preloadedState=>(0,redux_toolkit_modern.U1)({reducer,preloadedState});function StoreProvider({children,preloadedState}){const storeRef=(0,react.useRef)(null);return storeRef.current||(storeRef.current=makeStore(preloadedState)),(0,jsx_runtime.jsx)(react_redux.Kq,{store:storeRef.current,children})}StoreProvider.__docgenInfo={description:"",methods:[],displayName:"StoreProvider",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},preloadedState:{required:!1,tsType:{name:"Partial",elements:[{name:"ReturnType",elements:[{name:"reducer"}],raw:"ReturnType<typeof reducer>"}],raw:"Partial<RootState>"},description:""}}}},"./redux/slices/authSlice.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,je:()=>logOut});var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.modern.mjs");const logOut=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.zD)("auth/logOut",async()=>({success:!0})),authSlice=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.Z0)({name:"auth",initialState:{isAuthorised:!1},reducers:{setIsAuthorised(state,action){state.isAuthorised=action.payload}},extraReducers:builder=>{builder.addCase(logOut.fulfilled,state=>{state.isAuthorised=!1})}}),{setIsAuthorised}=authSlice.actions,__WEBPACK_DEFAULT_EXPORT__=authSlice.reducer},"./redux/slices/librarySlice.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,J5:()=>followArtist,i8:()=>unfollowArtist,pA:()=>fetchFollowedArtists});var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.modern.mjs"),_mocks_demoData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./mocks/demoData.ts");const initialState={panel:{activeTab:"playlists",tabs:[{type:"playlists",label:"Playlists"},{type:"albums",label:"Albums"},{type:"tracks",label:"Songs"},{type:"artists",label:"Artists"}]},playlists:{isLoading:!0,pagination:null,items:[{id:"liked-songs",name:"Liked Songs",images:[{url:(0,__webpack_require__("./utils/basePath.ts").h)("/liked-songs-300.jpg")}],isPinned:!0}]},albums:{isLoading:!0,pagination:null,items:[]},artists:{isLoading:!0,items:[]},likedSongs:{isLoading:!0,pagination:null,items:[]}},fetchUserPlaylists=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.zD)("library/fetchUserPlaylists",async({offset=0,limit=50})=>({href:"/api/library/playlists",items:offset>0?[]:[{..._mocks_demoData__WEBPACK_IMPORTED_MODULE_1__.Et,tracks:{..._mocks_demoData__WEBPACK_IMPORTED_MODULE_1__.Et.tracks,items:[]}}],limit,offset,next:null,previous:null,total:1})),fetchUserAlbums=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.zD)("library/fetchUserAlbums",async({offset=0,limit=50})=>({href:"/api/library/albums",items:_mocks_demoData__WEBPACK_IMPORTED_MODULE_1__.$X.slice(offset,offset+limit),limit,offset,next:null,previous:null,total:_mocks_demoData__WEBPACK_IMPORTED_MODULE_1__.$X.length})),fetchUserLikedSongs=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.zD)("library/fetchUserLikedSongs",async({offset=0,limit=50})=>({href:"/api/library/songs",items:_mocks_demoData__WEBPACK_IMPORTED_MODULE_1__.VV.slice(offset,offset+limit).map(item=>({...item,track:(0,_mocks_demoData__WEBPACK_IMPORTED_MODULE_1__.po)(item.track)})),limit,offset,next:null,previous:null,total:_mocks_demoData__WEBPACK_IMPORTED_MODULE_1__.VV.length})),fetchFollowedArtists=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.zD)("library/fetchFollowedArtists",async({limit=50})=>({artists:{href:"/api/library/artists",items:_mocks_demoData__WEBPACK_IMPORTED_MODULE_1__.vs.slice(0,limit),limit,next:null,offset:0,previous:null,total:_mocks_demoData__WEBPACK_IMPORTED_MODULE_1__.vs.length}})),followArtist=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.zD)("library/followArtist",async id=>id),unfollowArtist=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.zD)("library/unfollowArtist",async id=>id),librarySlice=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.Z0)({name:"library",initialState,reducers:{setActiveTab:(state,action)=>{state.panel.activeTab=action.payload}},extraReducers:builder=>{builder.addCase(fetchUserPlaylists.rejected,state=>{state.playlists.isLoading=!1}),builder.addCase(fetchUserPlaylists.fulfilled,(state,action)=>{state.playlists.isLoading=!1,state.playlists.pagination={href:action.payload.href,limit:action.payload.limit,offset:action.payload.offset,next:action.payload.next,previous:action.payload.previous,total:action.payload.total},state.playlists.items=[...state.playlists.items,...action.payload.items]}),builder.addCase(fetchUserAlbums.rejected,state=>{state.albums.isLoading=!1}),builder.addCase(fetchUserAlbums.fulfilled,(state,action)=>{state.albums.isLoading=!1,state.albums.pagination={href:action.payload.href,limit:action.payload.limit,offset:action.payload.offset,next:action.payload.next,previous:action.payload.previous,total:action.payload.total},state.albums.items=[...state.albums.items,...action.payload.items]}),builder.addCase(fetchUserLikedSongs.rejected,state=>{state.likedSongs.isLoading=!1}),builder.addCase(fetchUserLikedSongs.fulfilled,(state,action)=>{state.likedSongs.isLoading=!1,state.likedSongs.pagination={href:action.payload.href,limit:action.payload.limit,offset:action.payload.offset,next:action.payload.next,previous:action.payload.previous,total:action.payload.total},state.likedSongs.items=[...state.likedSongs.items,...action.payload.items]}),builder.addCase(fetchFollowedArtists.rejected,state=>{state.artists.isLoading=!1}),builder.addCase(fetchFollowedArtists.fulfilled,(state,action)=>{state.artists.isLoading=!1,state.artists.items=action.payload.artists.items}),builder.addCase(followArtist.fulfilled,(state,action)=>{const artist=_mocks_demoData__WEBPACK_IMPORTED_MODULE_1__.uX.find(item=>item.id===action.payload);if(!artist)return;state.artists.items.some(item=>item.id===artist.id)||(state.artists.items=[...state.artists.items,artist])}),builder.addCase(unfollowArtist.fulfilled,(state,action)=>{state.artists.items=state.artists.items.filter(artist=>artist.id!==action.payload)})}}),{setActiveTab}=librarySlice.actions,__WEBPACK_DEFAULT_EXPORT__=librarySlice.reducer},"./redux/slices/playerSlice.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>slices_playerSlice,To:()=>fetchPlaybackState,Lv:()=>getNowPlaying,v7:()=>pause,ZH:()=>play,U:()=>resume,jF:()=>seek,U5:()=>setDeviceId,_1:()=>setIsReady,ho:()=>setRepeatState,zZ:()=>setShuffleState,ls:()=>setVolume,CH:()=>skipToNext,wm:()=>skipToPrevious});var redux_toolkit_modern=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.modern.mjs"),reselect=__webpack_require__("./node_modules/reselect/dist/reselect.mjs"),demoData=__webpack_require__("./mocks/demoData.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");let audio=null,contextUri=demoData.k9,contextTracks=(0,demoData.Wf)(),currentIndex=0,shuffleState=!1,repeatState="off",listeners=[];const durationOverrides={},getTrackList=()=>contextTracks[contextUri]&&contextTracks[contextUri].length>0?contextTracks[contextUri]:demoData.AQ,getCurrentTrack=()=>{const trackList=getTrackList();var _trackList_currentIndex,_ref;return null!==(_ref=null!==(_trackList_currentIndex=trackList[currentIndex])&&void 0!==_trackList_currentIndex?_trackList_currentIndex:trackList[0])&&void 0!==_ref?_ref:demoData.AQ[0]},ensureAudio=()=>audio||(audio=new Audio,audio.volume=.7,audio.preload="auto",audio.addEventListener("ended",()=>{nextDemoTrack()}),audio.addEventListener("timeupdate",emitState),audio.addEventListener("play",emitState),audio.addEventListener("pause",emitState),audio.addEventListener("volumechange",emitState),audio),buildPlaybackState=()=>{const player=ensureAudio(),track=getCurrentTrack(),progressMs=player?Math.floor(1e3*player.currentTime):0,durationMsFromPlayer=player&&Number.isFinite(player.duration)?Math.floor(1e3*player.duration):null,durationMs=null!=durationMsFromPlayer?durationMsFromPlayer:(track=>{var _durationOverrides_track_id;return null!==(_durationOverrides_track_id=durationOverrides[track.id])&&void 0!==_durationOverrides_track_id?_durationOverrides_track_id:track.duration_ms})(track);return player&&(player.loop="track"===repeatState),{...(0,demoData.o1)(),context:{type:"playlist",href:"/api/playlist/demo-playlist",external_urls:{spotify:"/playlist/demo-playlist"},uri:contextUri},item:{...track,duration_ms:durationMs},progress_ms:Math.min(progressMs,durationMs),is_playing:!!player&&(!player.paused&&!player.ended),repeat_state:repeatState,shuffle_state:shuffleState,device:{id:"demo-device",is_active:!0,is_private_session:!1,is_restricted:!1,name:"Poetify demo",type:"Computer",volume_percent:player?Math.round(100*(player.volume||0)):70,supports_volume:!0}}},emitState=()=>{const state=buildPlaybackState();return listeners.forEach(listener=>listener(state)),state},loadTrack=track=>{const player=ensureAudio();player&&(player.src=track.preview_url,player.currentTime=0,player.onloadedmetadata=()=>{Number.isFinite(player.duration)&&(durationOverrides[track.id]=Math.floor(1e3*player.duration),emitState())})},playDemoTrack=async({contextUri:newContextUri,offset})=>{newContextUri&&(contextUri=newContextUri);(({offset,trackList})=>{if(offset)if("number"!=typeof offset.position){if(offset.uri){const matchIdx=trackList.findIndex(track=>track.uri===offset.uri);matchIdx>=0&&(currentIndex=matchIdx)}}else currentIndex=Math.max(0,Math.min(trackList.length-1,offset.position))})({offset,trackList:getTrackList()}),loadTrack(getCurrentTrack());try{var _ensureAudio;await(null===(_ensureAudio=ensureAudio())||void 0===_ensureAudio?void 0:_ensureAudio.play())}catch(err){console.error("[demoPlayer] Unable to start playback",err)}return emitState()},nextDemoTrack=()=>{var _ensureAudio;const trackList=getTrackList();return currentIndex=shuffleState?Math.floor(Math.random()*trackList.length):(currentIndex+1)%trackList.length,loadTrack(getCurrentTrack()),null===(_ensureAudio=ensureAudio())||void 0===_ensureAudio||_ensureAudio.play().catch(()=>{}),emitState()},fetchPlaybackState=(0,redux_toolkit_modern.zD)("player/fetchPlaybackState",async()=>emitState()),play=(0,redux_toolkit_modern.zD)("player/play",async({contextUri,offset})=>((()=>{contextTracks=(0,demoData.Wf)();const state=(0,demoData.o1)();ensureAudio(),loadTrack(getCurrentTrack())})(),playDemoTrack({contextUri,offset}))),pause=(0,redux_toolkit_modern.zD)("player/pause",async _deviceId=>(()=>{const player=ensureAudio();return null==player||player.pause(),emitState()})()),resume=(0,redux_toolkit_modern.zD)("player/resume",async _deviceId=>(async()=>{const player=ensureAudio();if(player)try{await player.play()}catch(err){console.error("[demoPlayer] Unable to resume playback",err)}return emitState()})()),seek=(0,redux_toolkit_modern.zD)("player/seek",async position=>(positionMs=>{const player=ensureAudio();return player&&(player.currentTime=positionMs/1e3),emitState()})(position).progress_ms),skipToNext=(0,redux_toolkit_modern.zD)("player/skipToNext",async()=>nextDemoTrack()),skipToPrevious=(0,redux_toolkit_modern.zD)("player/skipToPrevious",async()=>(()=>{var _ensureAudio;const trackList=getTrackList();return currentIndex=shuffleState?Math.floor(Math.random()*trackList.length):0===currentIndex?trackList.length-1:currentIndex-1,loadTrack(getCurrentTrack()),null===(_ensureAudio=ensureAudio())||void 0===_ensureAudio||_ensureAudio.play().catch(()=>{}),emitState()})()),setShuffleState=(0,redux_toolkit_modern.zD)("player/setShuffleState",async state=>(state=>(shuffleState=state,emitState()))(state).shuffle_state),setRepeatState=(0,redux_toolkit_modern.zD)("player/setRepeatState",async state=>(state=>(repeatState=state,emitState()))(state).repeat_state),setVolume=(0,redux_toolkit_modern.zD)("player/setVolume",async volume=>(value=>{const player=ensureAudio();return player&&(player.volume=Math.max(0,Math.min(1,value/100))),emitState()})(volume).device.volume_percent),playerSlice=(0,redux_toolkit_modern.Z0)({name:"player",initialState:{deviceId:null,isReady:!1,playbackState:null,isLoading:!1,hasInteracted:!1},reducers:{setDeviceId(state,action){state.deviceId=action.payload},setIsReady(state,action){state.isReady=action.payload},setPlaybackState(state,action){state.playbackState?(state.playbackState.item=action.payload.track,state.playbackState.progress_ms=action.payload.progress||0,state.playbackState.is_playing=action.payload.isPlaying,state.playbackState.timestamp=+new Date,state.playbackState.context=action.payload.context):state.playbackState={item:action.payload.track,device:{id:state.deviceId,is_active:!0},progress_ms:action.payload.progress||0,is_playing:action.payload.isPlaying,timestamp:+new Date,...action.payload.context&&{context:action.payload.context}}},setProgress(state,action){state.playbackState&&(state.playbackState.progress_ms=action.payload)}},extraReducers:builder=>{builder.addCase(fetchPlaybackState.pending,state=>{state.isLoading=!0}),builder.addCase(fetchPlaybackState.fulfilled,(state,action)=>{state.playbackState=action.payload,state.isLoading=!1}),builder.addCase(play.fulfilled,(state,action)=>{state.hasInteracted=!0,action.payload&&(state.playbackState=action.payload)}),builder.addCase(pause.fulfilled,(state,action)=>{state.playbackState&&(action.payload?state.playbackState=action.payload:state.playbackState.is_playing=!1)}),builder.addCase(resume.fulfilled,(state,action)=>{state.hasInteracted=!0,state.playbackState&&(action.payload?state.playbackState=action.payload:state.playbackState.is_playing=!0)}),builder.addCase(skipToNext.fulfilled,(state,action)=>{state.hasInteracted=!0,action.payload&&(state.playbackState=action.payload)}),builder.addCase(skipToPrevious.fulfilled,(state,action)=>{state.hasInteracted=!0,action.payload&&(state.playbackState=action.payload)}),builder.addCase(seek.fulfilled,(state,action)=>{state.playbackState&&(state.playbackState.progress_ms=action.payload)}),builder.addCase(setShuffleState.fulfilled,(state,action)=>{state.playbackState&&(state.playbackState.shuffle_state=action.payload)}),builder.addCase(setRepeatState.fulfilled,(state,action)=>{state.playbackState&&(state.playbackState.repeat_state=action.payload)}),builder.addCase(setVolume.fulfilled,(state,action)=>{state.playbackState&&(state.playbackState.device.volume_percent=action.payload)})}}),getNowPlaying=(0,reselect.Mz)([state=>state.player.deviceId,state=>state.player.playbackState,state=>state.player.hasInteracted],(deviceId,playbackState,hasInteracted)=>playbackState?{isPlaying:playbackState.is_playing,isActive:playbackState.device.is_active,isExternal:playbackState.device.id!==deviceId,isPrivate:playbackState.device.is_private_session,isPodcast:"episode"===playbackState.currently_playing_type,device:playbackState.device,progress:playbackState.progress_ms,timestamp:playbackState.timestamp,item:playbackState.item,context:playbackState.context,repeatState:playbackState.repeat_state,shuffleState:playbackState.shuffle_state,hasInteracted}:{isPlaying:!1,hasInteracted}),{setDeviceId,setIsReady,setPlaybackState,setProgress}=playerSlice.actions,slices_playerSlice=playerSlice.reducer},"./redux/slices/userSlice.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__,re:()=>isUserPremium});var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.modern.mjs"),_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/reselect/dist/reselect.mjs"),_authSlice__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./redux/slices/authSlice.ts");const initialState={displayName:null,country:null,email:null,explicitContent:null,externalUrls:null,followers:null,href:null,id:null,images:null,product:null,type:null,uri:null},userSlice=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__.Z0)({name:"user",initialState,reducers:{setUser(state,action){state.displayName=action.payload.display_name,state.country=action.payload.country,state.email=action.payload.email,state.explicitContent=action.payload.explicit_content,state.externalUrls=action.payload.external_urls,state.followers=action.payload.followers,state.href=action.payload.href,state.id=action.payload.id,state.images=action.payload.images,state.product=action.payload.product,state.type=action.payload.type,state.uri=action.payload.uri}},extraReducers:builder=>{builder.addCase(_authSlice__WEBPACK_IMPORTED_MODULE_2__.je.fulfilled,()=>initialState)}}),isUserPremium=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_1__.Mz)([state=>state.user.product],product=>"premium"===product),{setUser}=userSlice.actions,__WEBPACK_DEFAULT_EXPORT__=userSlice.reducer},"./utils/basePath.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var _process_env_NEXT_PUBLIC_BASE_PATH;__webpack_require__.d(__webpack_exports__,{h:()=>withBasePath});const basePath=null!==(_process_env_NEXT_PUBLIC_BASE_PATH=__webpack_require__("./node_modules/process/browser.js").env.NEXT_PUBLIC_BASE_PATH)&&void 0!==_process_env_NEXT_PUBLIC_BASE_PATH?_process_env_NEXT_PUBLIC_BASE_PATH:"",withBasePath=url=>basePath&&url.startsWith("/")?url===basePath||url.startsWith(`${basePath}/`)?url:`${basePath}${url}`:url}}]);